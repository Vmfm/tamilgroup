<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tamil Chat â€” Full Single File</title>
<style>
:root{--bg:#0b141a;--panel:#1b2a2f;--muted:#97a4ab;--accent:#25d366;--surface:#071215}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:#e9edef;font-family:Inter, system-ui, Arial, sans-serif}
.app{max-width:1200px;margin:0 auto;height:100vh;display:grid;grid-template-columns:320px 1fr 320px;gap:12px;padding:12px}
.card{background:var(--panel);border-radius:12px;padding:12px;box-shadow:0 6px 20px rgba(0,0,0,.6);display:flex;flex-direction:column}
.header{display:flex;align-items:center;gap:8px}
.header h1{font-size:18px;margin:0}
.usersList{overflow:auto;flex:1;margin-top:8px}
.userRow{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:8px;cursor:pointer}
.userRow:hover{background:rgba(255,255,255,.02)}
.userLeft{display:flex;align-items:center;gap:8px}
.avatar{width:40px;height:40px;border-radius:50%;background:#061011;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700}
.statusDot{width:10px;height:10px;border-radius:50%}
.controls{display:flex;gap:8px;align-items:center}
.search{padding:8px;border-radius:10px;border:0;background:#07151a;color:#fff;width:100%}
.centerColumn{display:flex;flex-direction:column;height:100%}
.chatHeader{display:flex;align-items:center;gap:12px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,.03)}
.messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:8px;background:linear-gradient(180deg,var(--surface),#051014)}
.msg{max-width:75%;padding:10px;border-radius:12px;font-size:14px;line-height:1.25}
.msg.me{align-self:flex-end;background:#005c4b;color:#fff;border-bottom-right-radius:4px}
.msg.other{align-self:flex-start;background:var(--panel)}
.msg .meta{font-size:12px;color:var(--muted);margin-bottom:6px}
.inputBar{display:flex;gap:8px;padding:10px;border-top:1px solid rgba(255,255,255,.03);align-items:center}
.input{flex:1;padding:10px;border-radius:22px;border:0;background:#162a2d;color:#fff}
.btn{padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:#071215;cursor:pointer}
.smallBtn{background:transparent;border:1px solid rgba(255,255,255,.04);padding:6px;border-radius:8px;color:var(--muted);cursor:pointer}
.rightColumn{display:flex;flex-direction:column;gap:12px}
.profileCard{display:flex;flex-direction:column;align-items:center;gap:8px}
.profileCard .avatar{width:90px;height:90px;font-size:32px}
.tiny{font-size:12px;color:var(--muted)}
.uploadPreview{max-width:160px;border-radius:8px}
.switch{display:inline-flex;align-items:center;gap:6px}
.settingsPanel{display:flex;flex-direction:column;gap:8px}
.adminPanel{background:rgba(255,255,255,.02);padding:8px;border-radius:8px}
.callOverlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.7);z-index:10000}
.callCard{background:var(--panel);padding:20px;border-radius:12px;display:flex;flex-direction:column;gap:12px;align-items:center}
#localVideo,#remoteVideo{width:220px;height:140px;background:#000;border-radius:8px}
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:20px;background:#162a2d;padding:8px 12px;border-radius:8px;display:none}
.loginWrap{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:999}
.loginCard{background:#0b141a;padding:18px;border-radius:12px;display:flex;flex-direction:column;gap:10px;min-width:320px}
.loginCard input{padding:10px;border-radius:10px;border:0;background:#162027;color:#fff}
.loginCard button{padding:10px;border-radius:10px;border:0;background:var(--accent);color:#fff;cursor:pointer}
.footerNote{font-size:12px;color:var(--muted);text-align:center;padding:8px}
@media(max-width:980px){.app{grid-template-columns:1fr;grid-auto-rows:1fr}.rightColumn{display:none}}
</style>
</head>
<body>

<!-- LOGIN (remember on this device) -->
<div id="loginWrap" class="loginWrap" style="display:none">
  <div class="loginCard">
    <div style="font-weight:700;color:#fff">Welcome to Tamil Chat</div>
    <input id="nameInput" placeholder="Enter display name" />
    <div style="font-size:12px;color:var(--muted)">This name is stored locally on this device only.</div>
    <div style="display:flex;gap:8px;justify-content:flex-end">
      <button id="joinBtn">Join</button>
    </div>
  </div>
</div>

<div class="app">
  <!-- LEFT: Users & Rooms -->
  <div class="card">
    <div class="header">
      <h1>Tamil Chat</h1>
      <div style="flex:1"></div>
      <button id="darkToggle" class="smallBtn">Theme</button>
    </div>

    <div style="margin-top:8px;display:flex;gap:8px">
      <input id="searchUsers" class="search" placeholder="Search users or rooms" />
    </div>

    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="openGroup" class="btn">Group Chat</button>
      <button id="openCreateRoom" class="smallBtn">+ Room</button>
    </div>

    <div class="usersList" id="usersList"></div>
  </div>

  <!-- CENTER: Chat Area -->
  <div class="card centerColumn">
    <div class="chatHeader">
      <div class="avatar" id="chatAvatar">G</div>
      <div style="flex:1">
        <div id="chatTitle" style="font-weight:700">Group Chat</div>
        <div id="chatSub" class="tiny">Public room â€¢ Everyone</div>
      </div>
      <div class="controls">
        <button id="startCallBtn" class="smallBtn">ðŸ“ž Call</button>
        <button id="startVideoCallBtn" class="smallBtn">ðŸŽ¥ Video</button>
        <button id="openPanelBtn" class="smallBtn">â˜°</button>
      </div>
    </div>

    <div id="messages" class="messages" aria-live="polite"></div>

    <div class="inputBar">
      <input id="messageInput" class="input" placeholder="Type a message..." autocomplete="off" />
      <input id="fileInput" type="file" accept="image/*,audio/*,video/*" style="display:none" />
      <button id="attachBtn" class="smallBtn">ðŸ“Ž</button>
      <button id="sendBtn" class="btn">Send</button>
    </div>

    <div id="typingLine" class="tiny" style="padding:8px 12px"></div>
  </div>

  <!-- RIGHT: Profile / Settings / Admin -->
  <div class="rightColumn">
    <div class="card profileCard">
      <div class="avatar" id="myAvatar">U</div>
      <div id="myName" style="font-weight:700">Guest</div>
      <div class="tiny">Status: <span id="myStatus">online</span></div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <input id="profileImgInput" type="file" accept="image/*" />
        <button id="logoutBtn" class="smallBtn">Logout</button>
      </div>
      <div id="profilePreview"></div>
    </div>

    <div class="card settingsPanel">
      <div style="font-weight:700">Settings</div>
      <label class="switch"><input type="checkbox" id="togglePrivate" checked/> Private Chat</label>
      <label class="switch"><input type="checkbox" id="toggleCall" checked/> Audio/Video Calls</label>
      <label class="switch"><input type="checkbox" id="togglePresence" checked/> Show Presence</label>
      <div style="margin-top:6px" class="tiny">Note: Profile images are saved locally to your browser for this demo.</div>
    </div>

    <div class="card adminPanel">
      <div style="font-weight:700">Admin Panel</div>
      <div class="tiny">Ban / Mute / Reports</div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <input id="adminTarget" placeholder="username" style="flex:1;padding:8px;border-radius:6px;border:0;background:rgba(255,255,255,.02);color:#fff" />
        <button id="banBtn" class="smallBtn">Ban</button>
        <button id="muteBtn" class="smallBtn">Mute</button>
      </div>
      <div style="margin-top:8px"><button id="viewReports" class="smallBtn">View Reports</button></div>
    </div>

    <div class="card">
      <div style="font-weight:700">About</div>
      <div class="tiny">Single-file demo: Group chat, private chat, media uploads, WebRTC calls (signaling via Firebase), admin actions.</div>
      <div class="footerNote">Make sure to keep your Firebase project secure (security rules) â€” this demo writes to the Realtime DB for signaling and messages.</div>
    </div>
  </div>
</div>

<!-- Call overlay -->
<div id="callOverlay" class="callOverlay" role="dialog" aria-modal="true">
  <div class="callCard">
    <div id="callHeader">Incoming call</div>
    <video id="localVideo" autoplay muted playsinline></video>
    <video id="remoteVideo" autoplay playsinline></video>
    <div style="display:flex;gap:8px">
      <button id="acceptCall" class="btn">Accept</button>
      <button id="declineCall" class="smallBtn">Decline</button>
    </div>
  </div>
</div>

<div id="toast" class="toast"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
/* ----------------- Firebase config (same as yours) ----------------- */
const firebaseConfig = {
  apiKey: "AIzaSyB1VbLbqBxCiG_bfGoQgQyapXwHUQ-Q7BU",
  authDomain: "tamil-chat-2d54e.firebaseapp.com",
  databaseURL: "https://tamil-chat-2d54e-default-rtdb.firebaseio.com",
  projectId: "tamil-chat-2d54e",
  storageBucket: "tamil-chat-2d54e.appspot.com",
  messagingSenderId: "804705969240",
  appId: "1:804705969240:web:658df281dd8360843c162d"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ----------------- small helpers ----------------- */
const $ = id => document.getElementById(id);
function showToast(msg){ const t=$('toast'); t.textContent=msg; t.style.display='block'; setTimeout(()=>t.style.display='none',2500); }
function formatTime(ts){ const d=new Date(ts||Date.now()); return d.toLocaleTimeString(); }

/* ----------------- state ----------------- */
let username = localStorage.getItem('guestName') || '';
let profileImage = localStorage.getItem('profileImage') || '';
let currentRoom = 'group_public';
let privateEnabled = true;
let callsEnabled = true;
let presenceEnabled = true;
let pendingFile = null;
let peerConn = null; let localStream = null; let pendingOfferId = null; let currentCallId = null;

/* ----------------- Login flow (remember on this device) ----------------- */
function showLogin(){ $('loginWrap').style.display='flex'; }
function hideLogin(){ $('loginWrap').style.display='none'; }

$('joinBtn').addEventListener('click', ()=>{ const n = $('nameInput').value.trim(); if(!n) return showToast('Enter a name'); username = n; localStorage.setItem('guestName', username); if(profileImage) db.ref(`profiles/${username}`).update({ profileImage }).catch(()=>{}); hideLogin(); startApp(); });

if(!username) showLogin(); else startApp();

/* ----------------- Start app after login ----------------- */
function startApp(){ $('myName').textContent = username; $('myAvatar').textContent = username.charAt(0).toUpperCase(); if(profileImage) $('profilePreview').innerHTML = `<img src="${profileImage}" class="uploadPreview">`;
  // presence
  if(presenceEnabled) { db.ref(`status/${username}`).set({ online:true, lastSeen: Date.now() }); db.ref(`status/${username}`).onDisconnect().set({ online:false, lastSeen: Date.now() }); }
  // create profile entry
  db.ref(`profiles/${username}`).update({ name: username, profileImage: profileImage||'', createdAt: Date.now() }).catch(()=>{});
  // initialize UI wiring
  initUI();
  renderUsersList();
  openRoom('group_public');
}

/* ----------------- UI wiring ----------------- */
$('openGroup').addEventListener('click', ()=> openRoom('group_public'));
$('openCreateRoom').addEventListener('click', ()=>{ const r=prompt('Room name:'); if(r) createRoom(r.trim()); });
$('attachBtn').addEventListener('click', ()=> $('fileInput').click());
$('fileInput').addEventListener('change', handleFileSelected);
$('sendBtn').addEventListener('click', sendMessage);
$('messageInput').addEventListener('keypress', e=>{ if(e.key==='Enter') sendMessage(); });
$('profileImgInput').addEventListener('change', function(){ const f=this.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ profileImage=r.result; localStorage.setItem('profileImage', profileImage); $('profilePreview').innerHTML = `<img src="${profileImage}" class="uploadPreview">`; db.ref(`profiles/${username}`).update({ profileImage }).catch(()=>{}); showToast('Profile updated'); }; r.readAsDataURL(f); });
$('logoutBtn').addEventListener('click', ()=>{ localStorage.removeItem('guestName'); localStorage.removeItem('profileImage'); location.reload(); });
$('searchUsers').addEventListener('input', renderUsersList);
$('banBtn').addEventListener('click', ()=> adminAction('ban'));
$('muteBtn').addEventListener('click', ()=> adminAction('mute'));
$('viewReports').addEventListener('click', async ()=>{ const r=await db.ref('reports').once('value'); console.log('Reports', r.val()); alert('Reports logged to console'); });
$('darkToggle').addEventListener('click', ()=>{ document.documentElement.style.filter = document.documentElement.style.filter ? '' : 'invert(1) hue-rotate(180deg)'; showToast('Theme toggled'); });

/* ----------------- Rooms & Users list ----------------- */
async function createRoom(name){ if(!name) return; const key = `room_${name}`; await db.ref(`rooms/${key}`).set({ name, createdAt: Date.now(), createdBy: username }); showToast('Room created'); renderUsersList(); }

function renderUsersList(){ db.ref('profiles').once('value').then(snap=>{ const all = snap.val()||{}; const q=$('searchUsers').value.toLowerCase(); const container=$('usersList'); container.innerHTML=''; // rooms first
    db.ref('rooms').once('value').then(rs=>{ const rooms = rs.val()||{}; Object.keys(rooms).forEach(rk=>{ const r=rooms[rk]; const row=document.createElement('div'); row.className='userRow'; row.innerHTML = `<div class="userLeft"><div class="avatar">R</div><div><div style="font-weight:700">${r.name}</div><div class="tiny">Room</div></div></div><div><button class="smallBtn" onclick="openRoom('${rk}')">Open</button></div>`; container.appendChild(row); });
      Object.keys(all).forEach(k=>{ if(k===username) return; const u=all[k]; if(q && !k.toLowerCase().includes(q) && !(u.name||'').toLowerCase().includes(q)) return; const row=document.createElement('div'); row.className='userRow'; row.innerHTML = `<div class="userLeft"><div class="avatar">${(u.name||k).charAt(0).toUpperCase()}</div><div><div style="font-weight:700">${u.name||k}</div><div class="tiny">${u.status||''}</div></div></div><div><button class="smallBtn" onclick="openPrivate('${k}')">Chat</button></div>`; container.appendChild(row); }); }); }); }

window.openPrivate = function(user){ if(!privateEnabled) return showToast('Private chat disabled'); openPrivateChat(user); };
window.openRoom = function(roomKey){ openRoom(roomKey); };

/* ----------------- messaging (group & rooms) ----------------- */
let roomListener = null; let privateListener = null;
function openRoom(roomKey){ currentRoom = roomKey; if(roomKey==='group_public'){ $('chatTitle').textContent='Group Chat'; $('chatAvatar').textContent='G'; $('chatSub').textContent='Public room â€¢ Everyone'; } else { db.ref(`rooms/${roomKey}`).once('value').then(s=>{ const r=s.val()||{}; $('chatTitle').textContent=r.name||roomKey; $('chatAvatar').textContent='R'; $('chatSub').textContent='Room'; }); }
  $('messages').innerHTML=''; subscribeToRoom(roomKey);
}

function subscribeToRoom(roomKey){ if(roomListener) roomListener.off(); const path = roomKey==='group_public' ? 'messages' : `roomMessages/${roomKey}`; const ref = db.ref(path).limitToLast(200); roomListener = ref; ref.on('child_added', snap=>{ const m=snap.val(); renderMessage(m); }); }

function renderMessage(m){ if(m.banned) return; const isMe = m.sender===username; const el = document.createElement('div'); el.className='msg '+(isMe?'me':'other'); const meta = document.createElement('div'); meta.className='meta'; meta.textContent = `${m.sender} â€¢ ${formatTime(m.time)}`; const body = document.createElement('div'); if(m.type==='image'){ body.innerHTML = `<img src="${m.data}" style="max-width:320px;border-radius:8px">`; } else if(m.type==='audio'){ body.innerHTML = `<audio controls src="${m.data}"></audio>`; } else if(m.type==='video'){ body.innerHTML = `<video controls src="${m.data}" style="max-width:320px;border-radius:8px"></video>`; } else { body.textContent = m.text; } el.appendChild(meta); el.appendChild(body); $('messages').appendChild(el); $('messages').scrollTop = $('messages').scrollHeight; }

function sendMessage(){ const text = $('messageInput').value.trim(); if(!text && !pendingFile) return; const payload = { sender: username, time: Date.now(), text: text||'', type: pendingFile? pendingFile.type : 'text', data: pendingFile? pendingFile.data : '' };
  const path = currentRoom==='group_public' ? 'messages' : `roomMessages/${currentRoom}`;
  db.ref(path).push(payload).then(()=>{ $('messageInput').value=''; pendingFile=null; $('fileInput').value=''; }).catch(()=> showToast('Send failed'));
  db.ref(`typing/${currentRoom}/${username}`).remove(); }

// typing
let typingTimer = null; $('messageInput').addEventListener('input', ()=>{ db.ref(`typing/${currentRoom}/${username}`).set(true); clearTimeout(typingTimer); typingTimer=setTimeout(()=> db.ref(`typing/${currentRoom}/${username}`).remove(),1500); });
db.ref('typing').on('value', snap=>{ const val=snap.val()||{}; const list = val[currentRoom]||{}; const names = Object.keys(list).filter(n=> n!==username); $('typingLine').textContent = names.length ? `${names.join(', ')} typing...` : ''; });

/* ----------------- file handling ----------------- */
function handleFileSelected(e){ const f=e.target.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = ()=>{ const data = reader.result; const t = f.type.startsWith('image') ? 'image' : f.type.startsWith('audio') ? 'audio' : f.type.startsWith('video') ? 'video' : 'file'; pendingFile = { type: t, data }; showToast('File attached'); }; reader.readAsDataURL(f); }

/* ----------------- private chat (per-user) ----------------- */
function openPrivateChat(other){ const chatId = `p_${[username,other].sort().join('_')}`; currentRoom = chatId; $('messages').innerHTML=''; $('chatTitle').textContent = `Private: ${other}`; $('chatAvatar').textContent = other.charAt(0).toUpperCase(); if(privateListener) privateListener.off(); const ref = db.ref(`privateChats/${chatId}`).limitToLast(200); privateListener = ref; ref.on('child_added', snap=>{ const m = snap.val(); renderMessage(m); if(m.sender!==username) db.ref(`unread/${username}/${other}`).set(0).catch(()=>{}); }); }

/* ----------------- admin & reporting ----------------- */
function adminAction(action){ const target = $('adminTarget').value.trim(); if(!target) return showToast('Enter username'); if(action==='ban'){ db.ref(`banned/${target}`).set(true); showToast(target+' banned'); db.ref('messages').orderByChild('sender').equalTo(target).once('value').then(ms=>{ ms.forEach(m=> m.ref.update({ banned:true })); }); } else if(action==='mute'){ db.ref(`muted/${target}`).set(true); showToast(target+' muted'); } }

function reportUser(target){ if(!target) return; db.ref(`reports/${target}/${username}`).set({ by: username, at: Date.now() }).then(()=>{ db.ref(`reports/${target}`).once('value').then(s=>{ if(s.numChildren()>=3){ db.ref(`banned/${target}`).set(true); db.ref('messages').orderByChild('sender').equalTo(target).once('value').then(ms=>{ ms.forEach(m=> m.ref.update({ banned:true })); }); showToast(target+' auto-banned'); } }); showToast('Reported'); }); }

/* ----------------- presence & profiles ----------------- */
db.ref('profiles').on('value', ()=> renderUsersList());
function refreshProfiles(){ renderUsersList(); }

/* ----------------- WebRTC call signaling via Firebase (demo) ----------------- */
const servers = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };
$('startCallBtn').addEventListener('click', ()=>{ const to = prompt('Call who? (username)'); if(to) startCall(to,false); });
$('startVideoCallBtn').addEventListener('click', ()=>{ const to = prompt('Video call who? (username)'); if(to) startCall(to,true); });

async function startCall(target,isVideo){ if(!callsEnabled) return showToast('Calls disabled'); currentCallId = `call_${[username,target].sort().join('_')}_${Date.now()}`; peerConn = new RTCPeerConnection(servers);
  peerConn.onicecandidate = e=>{ if(e.candidate) db.ref(`calls/${currentCallId}/candidates/${username}`).push(JSON.stringify(e.candidate)); };
  peerConn.ontrack = e=>{ $('remoteVideo').srcObject = e.streams[0]; };
  try{ localStream = await navigator.mediaDevices.getUserMedia({ audio:true, video:isVideo }); localStream.getTracks().forEach(t=> peerConn.addTrack(t, localStream)); $('localVideo').srcObject = localStream; } catch(e){ showToast('Media not available'); }
  const offer = await peerConn.createOffer(); await peerConn.setLocalDescription(offer);
  await db.ref(`calls/${currentCallId}`).set({ from: username, to: target, status:'ringing', startedAt: Date.now(), offer });
  db.ref(`calls/${currentCallId}`).on('value', snap=>{ const data = snap.val()||{}; if(data.answer && !peerConn.currentRemoteDescription){ peerConn.setRemoteDescription(new RTCSessionDescription(data.answer)); } });
  db.ref(`calls/${currentCallId}/candidates/${target}`).on('child_added', csnap=>{ const c=JSON.parse(csnap.val()); peerConn.addIceCandidate(new RTCIceCandidate(c)).catch(()=>{}); });
  $('callOverlay').style.display='flex'; $('callHeader').textContent=`Calling ${target}...`;
}

// handle incoming call offers
db.ref('calls').on('child_added', snap=>{ const id=snap.key; const c=snap.val(); if(c.to===username && c.status==='ringing'){ pendingOfferId = id; $('callOverlay').style.display='flex'; $('callHeader').textContent=`Incoming call from ${c.from}`; } });

$('acceptCall').addEventListener('click', async ()=>{ if(!pendingOfferId) return; const callId=pendingOfferId; const callSnap = await db.ref(`calls/${callId}`).once('value'); const callData = callSnap.val()||{}; peerConn = new RTCPeerConnection(servers);
  peerConn.onicecandidate = e=>{ if(e.candidate) db.ref(`calls/${callId}/candidates/${username}`).push(JSON.stringify(e.candidate)); };
  peerConn.ontrack = e=>{ $('remoteVideo').srcObject = e.streams[0]; };
  try{ localStream = await navigator.mediaDevices.getUserMedia({ audio:true, video:true }); localStream.getTracks().forEach(t=> peerConn.addTrack(t, localStream)); $('localVideo').srcObject = localStream; } catch(e){ showToast('Media denied'); }
  await peerConn.setRemoteDescription(new RTCSessionDescription(callData.offer)); const answer = await peerConn.createAnswer(); await peerConn.setLocalDescription(answer); await db.ref(`calls/${callId}/answer`).set(answer); db.ref(`calls/${callId}/candidates/${callData.from}`).on('child_added', csnap=>{ const c=JSON.parse(csnap.val()); peerConn.addIceCandidate(new RTCIceCandidate(c)).catch(()=>{}); });
  $('callOverlay').style.display='none'; pendingOfferId=null; currentCallId=callId; db.ref(`calls/${callId}/status`).set('answered');
});
$('declineCall').addEventListener('click', ()=>{ if(pendingOfferId){ db.ref(`calls/${pendingOfferId}/status`).set('declined'); pendingOfferId=null; } $('callOverlay').style.display='none'; });

/* ----------------- startup ----------------- */
function initUI(){ /* placeholder if needed */ }

// initial boot
(function boot(){ if(username){ startApp(); } else { showLogin(); } })();

</script>
</body>
</html>
